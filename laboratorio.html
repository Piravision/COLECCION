<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>游댧 Laboratorio de Efectos de Cromos</title>
    <style>
        /* Aqu칤 va todo el CSS que ya tienes en tu archivo principal */
        body {
            font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px; /* A침adimos padding para que no se pegue a los bordes */
            background-color: #0c0c0c;
            color: #f4f4f4;
            position: relative;
        }
        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
            padding: 20px;
            position: relative;
            z-index: 2;
        }
        .coleccion {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            padding: 20px 0;
            justify-content: center; /* Centramos los cromos */
        }
        .cromo-card {
            flex: 0 0 auto;
            width: 200px;
            border: 2px solid #555;
            border-radius: 10px;
            padding: 10px;
            background-color: #333;
            box-shadow: 0 4px 8px rgba(0,0,0,0.5);
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .cromo-card a { cursor: pointer; text-decoration: none; color: inherit; }
        .cromo-img-container { width: 100%; aspect-ratio: 1 / 1; overflow: hidden; border-radius: 5px; margin-bottom: 10px; }
        .cromo-img-container img { width: 100%; height: 100%; object-fit: cover; }
        .cromo-card h3 { margin: auto 0 5px; font-size: 1.2em; }
        .cromo-card p { margin: 5px 0 0; font-size: 0.9em; color: #ccc; }
        .cromo-numero { position: absolute; top: 10px; left: 10px; background-color: #ff9900; color: #111; padding: 5px 10px; border-radius: 5px; font-weight: bold; }
        
        /* --- ESTILOS DEL MODAL (Copiados de tu archivo final) --- */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.9); align-items: center; justify-content: center; perspective: 1000px; }
        .modal.visible { display: flex; }
        .modal-container-content { display: flex; flex-direction: column; align-items: center; }
        
		/* Contenedor de la carta para el efecto 3D */
		#modal-card-container {
			position: relative;
			transform-style: preserve-3d;
			transition: transform 0.1s linear, box-shadow 0.4s ease-out, border-color 0.4s ease-out;
			/* border-radius: 15px; */ /* Desactivamos el borde redondeado, la m치scara define la forma */
			/* overflow: hidden; */  /* Ya no es necesario con la m치scara */
			display: inline-block;
			transform: translateZ(0);

			/* --- L칈NEAS NUEVAS Y CLAVE PARA LA M츼SCARA --- */
			-webkit-mask-image: var(--card-mask); /* Para compatibilidad con Chrome/Safari */
			mask-image: var(--card-mask);         /* La m치scara que usar치 la forma del cromo */
			-webkit-mask-size: contain;
			mask-size: contain;                   /* La m치scara se ajusta al tama침o del contenedor */
			-webkit-mask-repeat: no-repeat;
			mask-repeat: no-repeat;               /* La m치scara no se repite */
			-webkit-mask-position: center;
			mask-position: center;                /* La m치scara se centra */
		}
		
		
		
		
		#modal-card-container::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; transition: opacity 0.25s ease-out; mix-blend-mode: color-dodge; pointer-events: none; z-index: 2; }
        #modal-card-container:hover::before { opacity: 1; }
        .modal-content { border-radius: 15px; display: block; width: auto; height: auto; max-width: 500px; max-height: 80vh; position: relative; z-index: 1; }
        .modal-info { margin-top: 20px; }
        .close { position: absolute; top: 15px; right: 35px; color: #f1f1f1; font-size: 40px; font-weight: bold; transition: 0.3s; cursor: pointer; z-index: 110; }
        
        /* --- PATRONES HOLOGR츼FICOS (Los que ya ten칤amos) --- */
        #modal-card-container.Com칰n::before { background-image: linear-gradient(115deg, transparent 30%, rgba(255,255,255,0.4) 48%, rgba(255,255,255,0.4) 52%, transparent 70%), url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.12'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); background-size: 250% 250%, auto; background-position: var(--mouse-x) var(--mouse-y), 0 0; background-repeat: no-repeat, repeat; }
        #modal-card-container.Raro::before { background-image: linear-gradient(115deg, transparent 30%, rgba(170,210,255,0.5) 48%, rgba(170,210,255,0.5) 52%, transparent 70%), url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.18'%3E%3Cpath d='M50 50c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10zM10 10c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10c0 5.523-4.477 10-10 10S0 25.523 0 20s4.477-10 10-10zm10 8c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm40 40c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8z' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E"); background-size: 250% 250%, auto; background-position: var(--mouse-x) var(--mouse-y), 0 0; background-repeat: no-repeat, repeat; }
        #modal-card-container.Legendario::before { background-image: linear-gradient(115deg, transparent 25%, hsla(0,100%,80%,0.28), hsla(60,100%,80%,0.28), hsla(120,100%,80%,0.28), hsla(180,100%,80%,0.28), hsla(240,100%,80%,0.28), transparent 75%), url("data:image/svg+xml,%3Csvg width='180' height='180' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M81.28 88H68.413l19.298 19.298L81.28 88zm2.107 0h13.226L90 107.838 83.387 88zm15.334 0h12.866l-19.298 19.298L98.72 88zm-32.927-2.207L73.586 78h32.827l.5.5 7.294 7.293L115.414 87l-24.707 24.707-.707.707L64.586 87l1.207-1.207zm2.62.207L74 80.414 79.586 86H68.414zm16 0L90 80.414 95.586 86H84.414zm16 0L106 80.414 111.586 86h-11.172zm-8-6h11.173L98 85.586 92.414 80zM82 85.586L87.586 80H76.414L82 85.586zM17.414 0L.707 16.707 0 17.414V0h17.414zM4.28 0L0 12.838V0h4.28zm10.306 0L2.288 12.298 6.388 0h8.198zM180 17.414L162.586 0H180v17.414zM165.414 0l12.298 12.298L173.612 0h-8.198zM180 12.838L175.72 0H180v12.838zM0 163h16.413l.5.5 7.294 7.293L25.414 172l-8 8H0v-17zm0 10h6.613l-2.334 7H0v-7zm14.586 7l7-7H8.72l-2.333 7h8.2zM0 165.414L5.586 171H0v-5.586zM10.414 171L16 165.414 21.586 171H10.414zm-8-6h11.172L8 170.586 2.414 165zM180 163h-16.413l-7.794 7.793-1.207 1.207 8 8H180v-17zm-14.586 17l-7-7h12.865l2.333 7h-8.2zM180 173h-6.613l2.334 7H180v-7zm-21.586-2l5.586-5.586 5.586 5.586h-11.172zM180 165.414L174.414 171H180v-5.586zm-8 5.172l5.586-5.586h-11.172l5.586 5.586zM152.933 25.653l1.414 1.414-33.94 33.942-1.416-1.416 33.943-33.94zm1.414 127.28l-1.414 1.414-33.942-33.94 1.416-1.416 33.94 33.943zm-127.28 1.414l-1.414-1.414 33.94-33.942 1.416 1.416-33.943 33.94zm-1.414-127.28l1.414-1.414 33.942 33.94-1.416 1.416-33.94-33.943zM0 85c2.21 0 4 1.79 4 4s-1.79 4-4 4v-8zm180 0c-2.21 0-4 1.79-4 4s1.79 4 4 4v-8zM94 0c0 2.21-1.79 4-4 4s-4-1.79-4-4h8zm0 180c0-2.21-1.79-4-4-4s-4 1.79-4 4h8z' fill='%239C92AC' fill-opacity='0.14' fill-rule='evenodd'/%3E%3C/svg%3E"); background-size: 250% 250%, auto; background-position: var(--mouse-x) var(--mouse-y), 0 0; background-repeat: no-repeat, repeat; }
        
        /* --- MARCOS DE NE칍N --- */
        #modal-card-container.Com칰n { border: 3px solid #E0E0E0; box-shadow: 0 0 15px #C0C0C0, inset 0 0 10px 2px #FFFFFF; --glow-color: #C0C0C0; animation: neon-pulse 3s ease-in-out infinite; }
        #modal-card-container.Raro { border: 3px solid #77b6e9; box-shadow: 0 0 18px #3498db, inset 0 0 10px 2px #FFFFFF; --glow-color: #3498db; animation: neon-pulse 3s ease-in-out infinite; }
        #modal-card-container.Legendario { border: 3px solid #FFEE75; box-shadow: 0 0 25px #FFD700, inset 0 0 12px 3px #FFFFFF; --glow-color: #FFD700; animation: neon-pulse 3s ease-in-out infinite; }
        @keyframes neon-pulse { 0%, 100% { box-shadow: inherit; } 70% { box-shadow: 0 0 40px var(--glow-color, #fff), inset 0 0 15px 4px #FFFFFF; } }

        /* ================================================================== */
        /* ===== ZONA DE LABORATORIO: A칌ADE AQU칈 TUS NUEVOS ESTILOS ===== */
        /* ================================================================== */

        /* --- INICIO: NUEVOS ESTILOS DE CARTA (Estilo Pok칠mon) --- */

		:root {
			--mx: 0.5; /* Posici칩n X del rat칩n (0 a 1) */
			--my: 0.5; /* Posici칩n Y del rat칩n (0 a 1) */
			--tx: 0px; /* Traslaci칩n X de la carta */
			--ty: 0px; /* Traslaci칩n Y de la carta */
			--rx: 0deg;/* Rotaci칩n X de la carta */
			--ry: 0deg;/* Rotaci칩n Y de la carta */
			--pos: 50% 50%; /* Posici칩n del brillo */
			--pos-x: 50%;
			--pos-y: 50%;
			--angle: 0deg; /* 츼ngulo del gradiente de brillo */
		}

		/* Contenedor principal de la carta */
		.card {
			width: 300px; /* Ajusta el tama침o base de la carta si quieres */
			aspect-ratio: 0.716; /* Proporci칩n de una carta est치ndar */
			position: relative;
			transform-style: preserve-3d;
			transform: 
				translateX(var(--tx)) 
				translateY(var(--ty));
		}

		.card__translater,
		.card__rotator {
			width: 100%;
			height: 100%;
			transform-style: preserve-3d;
			border-radius: 15px;
			box-shadow: 0 10px 30px rgba(0,0,0,0.3);
			transition: box-shadow 0.4s;
		}

		.card__translater {
			transform: 
				rotateX(var(--rx)) 
				rotateY(var(--ry));
		}

		.card__rotator {
			transition: transform 0.2s;
		}

		/* La imagen del cromo */
		.modal-content {
			display: block;
			width: 100%;
			height: 100%;
			border-radius: 15px;
			position: relative; /* Para que est칠 por debajo de los brillos */
			z-index: 1;
		}

		/* --- Capas de efectos --- */
		.card__holo {
			position: relative;
			width: 100%;
			height: 100%;
			border-radius: 15px;
			overflow: hidden;
			transform: translateZ(1px); /* Ligeramente por encima */
		}

		.card__holo::before,
		.card__holo::after {
			content: "";
			position: absolute;
			top: 0; left: 0;
			width: 100%; height: 100%;
			z-index: 2;
			pointer-events: none;
			background-size: cover;
			background-position: center;
			opacity: 0;
			transition: opacity 0.25s;
		}

		/* Efecto de brillo principal que se mueve */
		.card__holo::before {
			background-image:
				radial-gradient(
					circle at var(--pos),
					white,
					rgba(255,255,255,0.4) 10%,
					rgba(255,255,255,0) 30%
				);
			mix-blend-mode: color-dodge;
		}

		/* Efecto de reflejo de arco칤ris */
		.card__holo::after {
			background-image: 
				linear-gradient(
					var(--angle),
					hsla(180, 90%, 50%, 0.5),
					hsla(200, 90%, 50%, 0.5) 10%,
					hsla(220, 90%, 50%, 0) 20%,
					hsla(0, 0%, 0%, 0) 80%,
					hsla(0, 90%, 50%, 0.5) 90%,
					hsla(20, 90%, 50%, 0.5)
				);
			mix-blend-mode: screen;
		}

		.card:hover .card__holo::before,
		.card:hover .card__holo::after {
			opacity: 1;
		}

		/* --- PATRONES HOLOGR츼FICOS POR SERIE Y RAREZA --- */
		/*
		  Ahora, en lugar de modificar ::before, modificamos .card__holo
		  porque es el contenedor que hemos preparado para los fondos.
		*/

		/* PATR칍N PARA RARO DE DRAGONBALL */
		.card.serie-dragonball-combatcards-92.Raro .card__holo {
			background-image: url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%239C92AC' fill-opacity='0.18'%3E%3Cpath d='M50 50c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10c0 5.523-4.477 10-10 10s-10-4.477-10-10 4.477-10 10-10zM10 10c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10c0 5.523-4.477 10-10 10S0 25.523 0 20s4.477-10 10-10zm10 8c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8zm40 40c4.418 0 8-3.582 8-8s-3.582-8-8-8-8 3.582-8 8 3.582 8 8 8z' /%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
		}

		/* PATR칍N PARA LEGENDARIO DE DRAGONBALL */
		.card.serie-dragonball-combatcards-92.Legendario .card__holo {
			background-image: url("data:image/svg+xml,%3Csvg width='180' height='180' viewBox='0 0 180 180' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M81.28 88H68.413l19.298 19.298L81.28 88zm2.107 0h13.226L90 107.838 83.387 88zm15.334 0h12.866l-19.298 19.298L98.72 88zm-32.927-2.207L73.586 78h32.827l.5.5 7.294 7.293L115.414 87l-24.707 24.707-.707.707L64.586 87l1.207-1.207zm2.62.207L74 80.414 79.586 86H68.414zm16 0L90 80.414 95.586 86H84.414zm16 0L106 80.414 111.586 86h-11.172zm-8-6h11.173L98 85.586 92.414 80zM82 85.586L87.586 80H76.414L82 85.586zM17.414 0L.707 16.707 0 17.414V0h17.414zM4.28 0L0 12.838V0h4.28zm10.306 0L2.288 12.298 6.388 0h8.198zM180 17.414L162.586 0H180v17.414zM165.414 0l12.298 12.298L173.612 0h-8.198zM180 12.838L175.72 0H180v12.838zM0 163h16.413l.5.5 7.294 7.293L25.414 172l-8 8H0v-17zm0 10h6.613l-2.334 7H0v-7zm14.586 7l7-7H8.72l-2.333 7h8.2zM0 165.414L5.586 171H0v-5.586zM10.414 171L16 165.414 21.586 171H10.414zm-8-6h11.172L8 170.586 2.414 165zM180 163h-16.413l-7.794 7.793-1.207 1.207 8 8H180v-17zm-14.586 17l-7-7h12.865l2.333 7h-8.2zM180 173h-6.613l2.334 7H180v-7zm-21.586-2l5.586-5.586 5.586 5.586h-11.172zM180 165.414L174.414 171H180v-5.586zm-8 5.172l5.586-5.586h-11.172l5.586 5.586zM152.933 25.653l1.414 1.414-33.94 33.942-1.416-1.416 33.943-33.94zm1.414 127.28l-1.414 1.414-33.942-33.94 1.416-1.416 33.94 33.943zm-127.28 1.414l-1.414-1.414 33.94-33.942 1.416 1.416-33.943 33.94zm-1.414-127.28l1.414-1.414 33.942 33.94-1.416 1.416-33.94-33.943zM0 85c2.21 0 4 1.79 4 4s-1.79 4-4 4v-8zm180 0c-2.21 0-4 1.79-4 4s1.79 4 4 4v-8zM94 0c0 2.21-1.79 4-4 4s-4-1.79-4-4h8zm0 180c0-2.21-1.79-4-4-4s-4 1.79-4 4h8z' fill='%239C92AC' fill-opacity='0.14' fill-rule='evenodd'/%3E%3C/svg%3E");
		}

		/* --- FIN: NUEVOS ESTILOS DE CARTA --- */

        /* ================================================================== */
        /* ================================================================== */

    </style>
</head>
<body>
    <div class="container">
        <h1>Laboratorio de Efectos</h1>
        <p>Haz clic en un cromo para ver sus efectos. Edita este archivo para probar nuevas animaciones.</p>
        <div class="coleccion">

            <div class="cromo-card" data-serie="Marvel-Classics" data-rareza="Com칰n">
                <span class="cromo-numero">N췈: 868</span>
                <a href="#" onclick="openModalFromCard(this)">
                    <div class="cromo-img-container">
                        <img src="https://PiraVision.github.io/COLECCION/CROMOS PIRAVISION/Marvel-Classics/ANT-MAN.png" alt="ANT-MAN">
                    </div>
                </a>
                <div class="cromo-details">
                    <h3>ANT-MAN</h3>
                    <p>Rareza: Com칰n</p>
                </div>
            </div>

            <div class="cromo-card" data-serie="DragonBall CombatCards 92" data-rareza="Raro">
                <span class="cromo-numero">N췈: 613</span>
                <a href="#" onclick="openModalFromCard(this)">
                    <div class="cromo-img-container">
                        <img src="https://PiraVision.github.io/COLECCION/CROMOS PIRAVISION/DragonBall CombatCards 92/DB-001.png" alt="DB-001">
                    </div>
                </a>
                <div class="cromo-details">
                    <h3>DB-001</h3>
                    <p>Rareza: Raro</p> </div>
            </div>

            <div class="cromo-card" data-serie="DragonBall CombatCards 92" data-rareza="Legendario">
                <span class="cromo-numero">N췈: 733</span>
                <a href="#" onclick="openModalFromCard(this)">
                    <div class="cromo-img-container">
                        <img src="https://PiraVision.github.io/COLECCION/CROMOS PIRAVISION/DragonBall CombatCards 92/DB-121.jpg" alt="DB-121">
                    </div>
                </a>
                <div class="cromo-details">
                    <h3>DB-121</h3>
                    <p>Rareza: Legendario</p> </div>
            </div>

            <div class="cromo-card" data-serie="Caballeros del Zodiaco" data-rareza="Raro">
                <span class="cromo-numero">N췈: 737</span>
                <a href="#" onclick="openModalFromCard(this)">
                    <div class="cromo-img-container">
                        <img src="https://PiraVision.github.io/COLECCION/CROMOS PIRAVISION/Caballeros Zodiaco/HERO/Aioros-de-Sagitario(23-8-2025-4_40).png" alt="Aioros">
                    </div>
                </a>
                <div class="cromo-details">
                    <h3>Aioros de Sagitario</h3>
                    <p>Rareza: Raro</p>
                </div>
            </div>
            
            <div class="cromo-card" data-serie="JAIL-Edition" data-rareza="Legendario">
                <span class="cromo-numero">N췈: 534</span>
                <a href="#" onclick="openModalFromCard(this)">
                    <div class="cromo-img-container">
                        <img src="https://PiraVision.github.io/COLECCION/CROMOS PIRAVISION/JAIL-Edition/T800(12-8-2025-15_23).png" alt="T800-Jail">
                    </div>
                </a>
                <div class="cromo-details">
                    <h3>T800-Jail</h3>
                    <p>Rareza: Legendario</p>
                </div>
            </div>

        </div>
    </div>

    <div id="myModal" class="modal">
		<span class="close" onclick="closeModal()">&times;</span>
		<div class="modal-container-content">
			<div id="modal-card-container">
				<img class="modal-content" id="imgModal">
			</div>
			<div id="modal-info" class="modal-info"></div>
		</div>
	</div>
    
    <script>
		// --- ELEMENTOS GLOBALES DEL MODAL ---
		const modal = document.getElementById("myModal");
		const modalImg = document.getElementById("imgModal");
		const modalInfo = document.getElementById("modal-info");
		const modalCardContainer = document.getElementById('modal-card-container');

		// --- NUEVA L칍GICA DE EFECTOS (Estilo Pok칠mon) ---
		const handleCardMove = (e) => {
			const card = e.currentTarget;
			const rect = card.getBoundingClientRect();
			const {width, height, left, top} = rect;
			
			const mouseX = e.clientX - left;
			const mouseY = e.clientY - top;
			
			const x = (mouseX / width) - 0.5;
			const y = (mouseY / height) - 0.5;
			
			const tx = x * -20; // Traslaci칩n X (max 20px)
			const ty = y * -20; // Traslaci칩n Y (max 20px)
			
			const rx = y * -25; // Rotaci칩n X (max 25deg)
			const ry = x * 25;  // Rotaci칩n Y (max 25deg)
			
			const posX = (mouseX / width) * 100;
			const posY = (mouseY / height) * 100;
			
			const angle = Math.atan2(mouseY - (height / 2), mouseX - (width / 2)) * (180 / Math.PI);
			
			// Actualizamos las variables CSS
			card.style.setProperty('--tx', `${tx}px`);
			card.style.setProperty('--ty', `${ty}px`);
			card.style.setProperty('--rx', `${rx}deg`);
			card.style.setProperty('--ry', `${ry}deg`);
			card.style.setProperty('--pos-x', `${posX}%`);
			card.style.setProperty('--pos-y', `${posY}%`);
			card.style.setProperty('--pos', `${posX}% ${posY}%`);
			card.style.setProperty('--angle', `${angle}deg`);
		};

		const resetCard = (e) => {
			const card = e.currentTarget;
			card.style.setProperty('--tx', `0px`);
			card.style.setProperty('--ty', `0px`);
			card.style.setProperty('--rx', `0deg`);
			card.style.setProperty('--ry', `0deg`);
		};

		// --- VERSI칍N DE openModal PARA EL LABORATORIO (Actualizada) ---
		function openModalFromCard(linkElement) {
			const card = linkElement.closest('.cromo-card');
			const cromoSerie = card.dataset.serie;
			const cromoRareza = card.dataset.rareza;
			const cromoId = card.querySelector('.cromo-numero').textContent.split('N췈: ')[1];
			const cromoNombre = card.querySelector('h3').textContent;
			const imagenUrl = card.querySelector('img').src;

			// Limpiamos clases anteriores
			modalCardContainer.className = 'card'; // Reseteamos a la clase base "card"

			// A침adimos las clases de rareza y serie
			if (cromoRareza) { modalCardContainer.classList.add(cromoRareza); }
			if (cromoSerie) {
				const serieClassName = 'serie-' + cromoSerie.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '');
				modalCardContainer.classList.add(serieClassName);
			}
			
			// --- L칈NEA NUEVA Y CLAVE ---
			// Le decimos al CSS que use la URL de la imagen del cromo como m치scara
			modalCardContainer.style.setProperty('--card-mask', `url(${imagenUrl})`);
			
			
			// Cargamos datos y mostramos
			modalImg.src = imagenUrl;
			modalInfo.innerHTML = `<h3>N췈: ${cromoId} - ${cromoNombre}</h3>`;
			modal.classList.add("visible");
			
			// A칌ADIMOS los nuevos listeners
			modalCardContainer.addEventListener('mousemove', handleCardMove);
			modalCardContainer.addEventListener('mouseleave', resetCard);
		}

		function closeModal() {
			modal.classList.remove("visible");
			// QUITAMOS los listeners para ahorrar recursos
			modalCardContainer.removeEventListener('mousemove', handleCardMove);
			modalCardContainer.removeEventListener('mouseleave', resetCard);
			resetCard({currentTarget: modalCardContainer});
		}

		window.onclick = function(event) {
			if (event.target == modal) {
				closeModal();
			}
		}
	</script>